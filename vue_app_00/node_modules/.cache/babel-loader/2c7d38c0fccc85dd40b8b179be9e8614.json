{"remainingRequest":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\src\\components\\subcomponents\\comments.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\src\\components\\subcomponents\\comments.vue","mtime":1562899592584},{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      pageIndex: 1,\n      comments: [],\n      msg: \"\"\n    };\n  },\n  created: function created() {\n    this.getComments();\n  },\n  methods: {\n    getComments: function getComments() {\n      var _this = this;\n\n      this.axios.get(\"star/getcomments\", {\n        params: {\n          id: this.id,\n          pageindex: this.pageIndex\n        }\n      }).then(function (result) {\n        _this.comments = _this.comments.concat(result.data);\n      });\n    },\n    getMore: function getMore() {\n      this.pageIndex++;\n      this.getComments();\n    },\n    timeChange: function timeChange(dateString, formdate) {\n      if (dateString == null || dateString == '') {\n        return '';\n      }\n\n      var date = new Date(parseInt(dateString));\n      var year = date.getFullYear();\n      var month = date.getMonth() + 1 < 10 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1;\n      var currentDate = date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();\n      var hours = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours();\n      var minutes = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes();\n\n      if (formdate == null || formdate == \"yyyy-mm-dd HH:mm\") {\n        return year + \"-\" + month + \"-\" + currentDate + \" \" + hours + \":\" + minutes;\n      }\n    },\n    postComment: function postComment() {\n      if (this.msg.trim().length === 0) {\n        return this.$toast(\"评论内容不能为空！\");\n      }\n\n      var abc = this;\n      this.axios.post(\"star/postcomment\", \"id=\".concat(this.$route.params.id, \"&user_name=\\u533F\\u540D\\u7528\\u6237&add_time=\").concat(this.timeChange(Date.now()), \"&content=\").concat(this.msg.trim())).then(function (result) {\n        var cmt = {\n          user_name: '匿名用户',\n          add_time: new Date(),\n          content: abc.msg.trim()\n        };\n        abc.comments.unshift(cmt);\n        abc.msg = \"\";\n      });\n    }\n  },\n  props: [\"id\"]\n};",{"version":3,"sources":["comments.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAoBA,eAAA;AACA,MADA,kBACA;AACA,WAAA;AACA,iBAAA,CADA;AAEA,gBAAA,EAFA;AAGA,WAAA;AAHA,KAAA;AAKA,GAPA;AAQA,SARA,qBAQA;AACA,SAAA,WAAA;AACA,GAVA;AAWA,WAAA;AACA,eADA,yBACA;AAAA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,kBAAA,EAAA;AAAA,gBAAA;AACA,cAAA,KAAA,EADA;AACA,qBAAA,KAAA;AADA;AAAA,OAAA,EAEA,IAFA,CAEA,kBAAA;AACA,cAAA,QAAA,GAAA,MAAA,QAAA,CAAA,MAAA,CAAA,OAAA,IAAA,CAAA;AACA,OAJA;AAKA,KAPA;AAQA,WARA,qBAQA;AACA,WAAA,SAAA;AACA,WAAA,WAAA;AACA,KAXA;AAYA,cAZA,sBAYA,UAZA,EAYA,QAZA,EAYA;AACA,UAAA,cAAA,IAAA,IAAA,cAAA,EAAA,EAAA;AACA,eAAA,EAAA;AACA;;AACA,UAAA,OAAA,IAAA,IAAA,CAAA,SAAA,UAAA,CAAA,CAAA;AACA,UAAA,OAAA,KAAA,WAAA,EAAA;AACA,UAAA,QAAA,KAAA,QAAA,KAAA,CAAA,GAAA,EAAA,GAAA,OAAA,KAAA,QAAA,KAAA,CAAA,CAAA,GAAA,KAAA,QAAA,KAAA,CAAA;AACA,UAAA,cAAA,KAAA,OAAA,KAAA,EAAA,GAAA,MAAA,KAAA,OAAA,EAAA,GAAA,KAAA,OAAA,EAAA;AACA,UAAA,QAAA,KAAA,QAAA,KAAA,EAAA,GAAA,MAAA,KAAA,QAAA,EAAA,GAAA,KAAA,QAAA,EAAA;AACA,UAAA,UAAA,KAAA,UAAA,KAAA,EAAA,GAAA,MAAA,KAAA,UAAA,EAAA,GAAA,KAAA,UAAA,EAAA;;AACA,UAAA,YAAA,IAAA,IAAA,YAAA,kBAAA,EAAA;AACA,eAAA,OAAA,GAAA,GAAA,KAAA,GAAA,GAAA,GAAA,WAAA,GAAA,GAAA,GAAA,KAAA,GAAA,GAAA,GAAA,OAAA;AACA;AACA,KAzBA;AA0BA,eA1BA,yBA0BA;AACA,UAAA,KAAA,GAAA,CAAA,IAAA,GAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,KAAA,MAAA,CAAA,WAAA,CAAA;AACA;;AACA,UAAA,MAAA,IAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,kBAAA,eACA,KAAA,MAAA,CAAA,MAAA,CAAA,EADA,0DACA,KAAA,UAAA,CAAA,KAAA,GAAA,EAAA,CADA,sBACA,KAAA,GAAA,CAAA,IAAA,EADA,GAEA,IAFA,CAEA,UAAA,MAAA,EAAA;AACA,YAAA,MAAA;AACA,qBAAA,MADA;AAEA,oBAAA,IAAA,IAAA,EAFA;AAGA,mBAAA,IAAA,GAAA,CAAA,IAAA;AAHA,SAAA;AAKA,YAAA,QAAA,CAAA,OAAA,CAAA,GAAA;AACA,YAAA,GAAA,GAAA,EAAA;AACA,OAVA;AAWA;AA1CA,GAXA;AAuDA,SAAA,CAAA,IAAA;AAvDA,CAAA","sourcesContent":["<template>\r\n  <div class=\"cmt-container\">\r\n    <h3>发表评论</h3>\r\n    <hr>\r\n    <textarea placeholder=\"请输入评论内容\" maxlength=\"120\" v-model=\"msg\"></textarea>\r\n    <mt-button type=\"primary\" size=\"large\" @click=\"postComment\">发表评论</mt-button>\r\n    <div class=\"cmt-list\">\r\n      <div class=\"cmt-item\" v-for=\"(item, i) in comments\" :key=\"item.add_time\">\r\n        <div class=\"cmt-title\">\r\n          第{{ i+1 }}楼&nbsp;&nbsp;用户：{{ item.user_name }}&nbsp;&nbsp;发表时间：{{ item.add_time | dateFormat }}\r\n        </div>\r\n        <div class=\"cmt-body\">\r\n          {{ item.content == 'undefined' ? '此用户很懒，什么都没说': item.content }}\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <mt-button type=\"danger\" size=\"large\" plain @click=\"getMore\">加载更多</mt-button>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      pageIndex: 1,\r\n      comments: [],\r\n      msg: \"\" \r\n    }\r\n  },\r\n  created() {\r\n    this.getComments();\r\n  },\r\n  methods: {\r\n    getComments() {\r\n      this.axios.get(\"star/getcomments\",{params:{\r\n        id:this.id,pageindex:this.pageIndex\r\n      }}).then(result => {\r\n            this.comments = this.comments.concat(result.data);\r\n      });\r\n    },\r\n    getMore() {\r\n      this.pageIndex++;\r\n      this.getComments();\r\n    },\r\n    timeChange(dateString, formdate) {\r\n      if (dateString == null || dateString == '') {\r\n          return '';\r\n      }\r\n      var date = new Date(parseInt(dateString));\r\n      var year = date.getFullYear();\r\n      var month = date.getMonth() + 1 < 10 ? \"0\" + (date.getMonth() + 1) : date.getMonth() + 1;\r\n      var currentDate = date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate();\r\n      var hours = date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours();\r\n      var minutes = date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes();\r\n      if (formdate == null || formdate == \"yyyy-mm-dd HH:mm\") {\r\n          return year + \"-\" + month + \"-\" + currentDate + \" \" + hours + \":\" + minutes;\r\n      }\r\n    },\r\n    postComment() {\r\n      if (this.msg.trim().length === 0) {\r\n        return this.$toast(\"评论内容不能为空！\");\r\n      }\r\n      var  abc=this;\r\n      this.axios.post(\"star/postcomment\",\r\n          `id=${this.$route.params.id}&user_name=匿名用户&add_time=${this.timeChange(Date.now())}&content=${this.msg.trim()}`\r\n      ).then(function(result) {\r\n            var cmt = {\r\n              user_name: '匿名用户',\r\n              add_time: new Date(),\r\n              content: abc.msg.trim()\r\n            };\r\n            abc.comments.unshift(cmt);\r\n            abc.msg = \"\";\r\n        });\r\n    }\r\n  },\r\n  props: [\"id\"]\r\n};\r\n</script>\r\n<style scoped>\r\n.cmt-container h3{\r\n  font-size: 18px;\r\n}\r\n.cmt-container textarea {\r\n  font-size: 14px;\r\n  height: 85px;\r\n  margin: 0;\r\n}\r\n.cmt-container .cmt-list {\r\n  margin: 5px 0;\r\n}  \r\n.cmt-container .cmt-list .cmt-item {\r\n  font-size: 13px;\r\n}\r\n.cmt-container .cmt-list .cmt-title {\r\n  line-height: 30px;\r\n  background-color: #ccc;\r\n}\r\n.cmt-container .cmt-list .cmt-body {\r\n  line-height: 35px;\r\n  text-indent: 2em;\r\n  font-size:14px;\r\n}\r\n</style>"],"sourceRoot":"src\\components\\subcomponents"}]}