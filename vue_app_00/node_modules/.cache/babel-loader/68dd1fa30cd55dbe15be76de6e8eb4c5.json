{"remainingRequest":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\src\\main.js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\src\\main.js","mtime":1563762728829},{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.promise\";\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router'; // 引入Mint-UI\n\nimport MintUI from 'mint-ui';\nimport 'mint-ui/lib/style.css';\nVue.use(MintUI); // 引入Vant\n\nimport Vant from 'vant';\nimport 'vant/lib/index.css';\nVue.use(Vant); // 导入 MUI 的样式\n\nimport mui from './lib/mui/js/mui.js';\nimport './lib/mui/css/mui.css'; // 导入格式化时间的插件\n\nimport moment from 'moment'; // 定义全局的过滤器\n\nVue.filter('dateFormat', function (dataStr) {\n  var pattern = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"YYYY-MM-DD HH:mm:ss\";\n  return moment(dataStr).format(pattern);\n}); // 引入axios\n\nimport axios from \"./axios\"; // 引入vuex\n\nimport Vuex from 'vuex';\nVue.use(Vuex);\nvar car = [];\ncar = JSON.parse(localStorage.getItem('car')) || [];\nconsole.log(car);\nvar store = new Vuex.Store({\n  state: {\n    car: car // { id:商品的id, count: 要购买的数量, price: 商品的单价，selected: false  }\n\n  },\n  mutations: {\n    addToCar: function addToCar(state, goodsinfo) {\n      var flag = false;\n      state.car.some(function (item) {\n        if (item.id == goodsinfo.id) {\n          item.count += parseInt(goodsinfo.count);\n          flag = true;\n          return true;\n        }\n      });\n\n      if (!flag) {\n        state.car.push(goodsinfo);\n      }\n\n      localStorage.setItem('car', JSON.stringify(state.car));\n    },\n    updateGoodsInfo: function updateGoodsInfo(state, goodsinfo) {\n      state.car.some(function (item) {\n        if (item.id == goodsinfo.id) {\n          item.count = parseInt(goodsinfo.count);\n          return true;\n        }\n      });\n      localStorage.setItem('car', JSON.stringify(state.car));\n    },\n    removeFormCar: function removeFormCar(state, id) {\n      state.car.some(function (item, i) {\n        if (item.id == id) {\n          state.car.splice(i, 1);\n          return true;\n        }\n      });\n      localStorage.setItem('car', JSON.stringify(state.car));\n    },\n    updateGoodsSelected: function updateGoodsSelected(state, info) {\n      state.car.some(function (item) {\n        if (item.id == info.id) {\n          item.selected = info.selected;\n        }\n      });\n      localStorage.setItem('car', JSON.stringify(state.car));\n    }\n  },\n  getters: {\n    getAllCount: function getAllCount(state) {\n      var c = 0;\n      console.log(state.car);\n      state.car.forEach(function (item) {\n        c += item.count;\n      });\n      return c;\n    },\n    getGoodsCount: function getGoodsCount(state) {\n      var o = {};\n      state.car.forEach(function (item) {\n        o[item.id] = item.count;\n      });\n      return o;\n    },\n    getGoodsSelected: function getGoodsSelected(state) {\n      var o = {};\n      state.car.forEach(function (item) {\n        o[item.id] = item.selected;\n      });\n      return o;\n    },\n    getGoodsCountAndAmount: function getGoodsCountAndAmount(state) {\n      var o = {\n        count: 0,\n        amount: 0\n      };\n      state.car.forEach(function (item) {\n        if (item.selected) {\n          o.count += item.count;\n          o.amount += item.price * item.count;\n        }\n      });\n      return o;\n    }\n  }\n});\nVue.config.productionTip = false;\nnew Vue({\n  router: router,\n  render: function render(h) {\n    return h(App);\n  },\n  store: store\n}).$mount('#app');\nrouter.beforeEach(function (to, from, next) {\n  var phone = localStorage.getItem('phone');\n\n  if (to.name == 'starinfo' || to.name == 'shopcart-product-id') {\n    if (phone == null) {\n      router.push({\n        name: 'my'\n      });\n    }\n  }\n\n  if (to.name === 'my') {\n    if (phone != null) {\n      router.push({\n        name: 'user'\n      });\n    }\n  }\n\n  next();\n});",{"version":3,"sources":["src\\main.js"],"names":["Vue","App","router","MintUI","use","Vant","mui","moment","filter","dataStr","pattern","format","axios","Vuex","car","JSON","parse","localStorage","getItem","console","log","store","Store","state","mutations","addToCar","goodsinfo","flag","some","item","id","count","parseInt","push","setItem","stringify","updateGoodsInfo","removeFormCar","i","splice","updateGoodsSelected","info","selected","getters","getAllCount","c","forEach","getGoodsCount","o","getGoodsSelected","getGoodsCountAndAmount","amount","price","config","productionTip","render","h","$mount","beforeEach","to","from","next","phone","name"],"mappings":"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","sourceRoot":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00","sourcesContent":["import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\n// 引入Mint-UI\r\nimport MintUI from 'mint-ui'\r\nimport'mint-ui/lib/style.css'\r\nVue.use(MintUI)\r\n// 引入Vant\r\nimport Vant from 'vant';\r\nimport 'vant/lib/index.css';\r\nVue.use(Vant);\r\n// 导入 MUI 的样式\r\nimport mui from './lib/mui/js/mui.js'\r\nimport './lib/mui/css/mui.css'\r\n// 导入格式化时间的插件\r\nimport moment from 'moment'\r\n// 定义全局的过滤器\r\n\r\nVue.filter('dateFormat', function (dataStr, pattern = \"YYYY-MM-DD HH:mm:ss\") {\r\n  return moment(dataStr).format(pattern)\r\n})  \r\n// 引入axios\r\nimport axios from \"./axios\";\r\n// 引入vuex\r\nimport Vuex from 'vuex'\r\nVue.use(Vuex) \r\nvar  car=[];\r\n car = JSON.parse(localStorage.getItem('car'))||[]\r\n console.log(car)\r\nvar store = new Vuex.Store({\r\n  state: { \r\n    car: car \r\n    // { id:商品的id, count: 要购买的数量, price: 商品的单价，selected: false  }\r\n  },\r\n  mutations: {\r\n    addToCar(state, goodsinfo) {\r\n      var flag = false\r\n      state.car.some(item => {\r\n        if (item.id == goodsinfo.id) {\r\n          item.count += parseInt(goodsinfo.count)\r\n          flag = true\r\n          return true\r\n        }\r\n      })\r\n      if (!flag) {\r\n        state.car.push(goodsinfo)\r\n      }\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    },\r\n    updateGoodsInfo(state, goodsinfo) {\r\n      state.car.some(item => {\r\n        if (item.id == goodsinfo.id) {\r\n          item.count = parseInt(goodsinfo.count)\r\n          return true\r\n        }\r\n      })\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    },\r\n    removeFormCar(state, id) {\r\n      state.car.some((item, i) => {\r\n        if (item.id == id) {\r\n          state.car.splice(i, 1)\r\n          return true;\r\n        }\r\n      })\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    },\r\n    updateGoodsSelected(state, info) {\r\n      state.car.some(item => {\r\n        if (item.id == info.id) {\r\n          item.selected = info.selected\r\n        }\r\n      })\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    }\r\n  },\r\n  getters: { \r\n    getAllCount(state) {\r\n      var c = 0;\r\n      console.log(state.car)\r\n     state.car.forEach(item => {\r\n        c += item.count\r\n      })\r\n      return c\r\n    },\r\n    getGoodsCount(state) {\r\n      var o = {}\r\n      state.car.forEach(item => {\r\n        o[item.id] = item.count\r\n      })\r\n      return o\r\n    },\r\n    getGoodsSelected(state) {\r\n      var o = {}\r\n      state.car.forEach(item => {\r\n        o[item.id] = item.selected\r\n      })\r\n      return o\r\n    },\r\n    getGoodsCountAndAmount(state) {\r\n      var o = {\r\n        count: 0, \r\n        amount: 0 \r\n      }\r\n      state.car.forEach(item => {\r\n        if (item.selected) {\r\n          o.count += item.count\r\n          o.amount += item.price * item.count\r\n        }\r\n      })\r\n      return o\r\n    }\r\n  }\r\n})\r\n\r\n\r\nVue.config.productionTip = false\r\nnew Vue({\r\n  router,\r\n  render: h => h(App),\r\n  store\r\n}).$mount('#app')\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  let phone = localStorage.getItem('phone')\r\n  if (to.name == 'starinfo'||to.name == 'shopcart-product-id') {\r\n      if(phone ==null){\r\n        router.push({ name: 'my' })\r\n      }\r\n  }\r\n  if (to.name === 'my') { \r\n    if (phone != null) {\r\n      router.push({ name: 'user' });\r\n    }\r\n  }\r\n  next();\r\n})"]}]}