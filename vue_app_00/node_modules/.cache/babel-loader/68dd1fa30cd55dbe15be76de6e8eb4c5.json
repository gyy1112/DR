{"remainingRequest":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\src\\main.js","dependencies":[{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\src\\main.js","mtime":1563853516783},{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport Vue from 'vue';\nimport App from './App.vue';\nimport router from './router'; // 引入Mint-UI\n\nimport MintUI from 'mint-ui';\nimport 'mint-ui/lib/style.css';\nVue.use(MintUI); // 引入Vant\n\nimport Vant from 'vant';\nimport 'vant/lib/index.css';\nVue.use(Vant); // 导入 MUI 的样式\n\nimport mui from './lib/mui/js/mui.js';\nimport './lib/mui/css/mui.css'; // 导入格式化时间的插件\n\nimport moment from 'moment'; // 定义全局的过滤器\n\nVue.filter('dateFormat', function (dataStr) {\n  var pattern = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"YYYY-MM-DD HH:mm:ss\";\n  return moment(dataStr).format(pattern);\n}); // 引入axios\n\nimport axios from \"./axios\"; // 引入vuex\n\nimport Vuex from 'vuex';\nVue.use(Vuex);\nvar car = [];\ncar = JSON.parse(localStorage.getItem('car')) || [];\nvar store = new Vuex.Store({\n  state: {\n    car: car // { productid:商品的id, count: 要购买的数量, price: 商品的单价，selected: false  }\n\n  },\n  mutations: {\n    addToCar: function addToCar(state, goodsinfo) {\n      var flag = false;\n      state.car.some(function (item) {\n        if (item.productid == goodsinfo.productid) {\n          item.count += parseInt(goodsinfo.count);\n          flag = true;\n          return true;\n        }\n      });\n\n      if (!flag) {\n        state.car.push(goodsinfo);\n      }\n\n      localStorage.setItem('car', JSON.stringify(state.car));\n    },\n    updateGoodsInfo: function updateGoodsInfo(state, goodsinfo) {\n      state.car.some(function (item) {\n        if (item.productid == goodsinfo.productid) {\n          item.count = parseInt(goodsinfo.count);\n          return true;\n        }\n      });\n      localStorage.setItem('car', JSON.stringify(state.car));\n    },\n    removeFormCar: function removeFormCar(state, id) {\n      state.car.some(function (item, i) {\n        if (item.productid == id) {\n          state.car.splice(i, 1);\n          return true;\n        }\n      });\n      localStorage.setItem('car', JSON.stringify(state.car));\n    },\n    updateGoodsSelected: function updateGoodsSelected(state, info) {\n      state.car.some(function (item) {\n        if (item.productid == info.id) {\n          item.selected = info.selected;\n        }\n      });\n      localStorage.setItem('car', JSON.stringify(state.car));\n    }\n  },\n  getters: {\n    getAllCount: function getAllCount(state) {\n      var c = 0;\n      state.car.forEach(function (item) {\n        c += item.count;\n      });\n      return c;\n    },\n    getGoodsCount: function getGoodsCount(state) {\n      var o = {};\n      state.car.forEach(function (item) {\n        o[item.productid] = item.count;\n      });\n      return o;\n    },\n    getGoodsSelected: function getGoodsSelected(state) {\n      var o = {};\n      state.car.forEach(function (item) {\n        o[item.productid] = item.selected;\n      });\n      return o;\n    },\n    getGoodsCountAndAmount: function getGoodsCountAndAmount(state) {\n      var o = {\n        count: 0,\n        amount: 0\n      };\n      state.car.forEach(function (item) {\n        if (item.selected) {\n          o.count += item.count;\n          o.amount += item.price * item.count;\n        }\n      });\n      return o;\n    }\n  }\n});\nVue.config.productionTip = false;\nnew Vue({\n  router: router,\n  render: function render(h) {\n    return h(App);\n  },\n  store: store\n}).$mount('#app');\nrouter.beforeEach(function (to, from, next) {\n  var phone = localStorage.getItem('phone');\n\n  if (to.name == 'starinfo' || to.name == 'shopcart-product-id') {\n    if (phone == null) {\n      router.push({\n        name: 'my'\n      });\n    }\n  }\n\n  if (to.name == 'my') {\n    if (phone != null) {\n      router.push({\n        name: 'user'\n      });\n    }\n  }\n\n  next();\n});",{"version":3,"sources":["src\\main.js"],"names":["Vue","App","router","MintUI","use","Vant","mui","moment","filter","dataStr","pattern","format","axios","Vuex","car","JSON","parse","localStorage","getItem","store","Store","state","mutations","addToCar","goodsinfo","flag","some","item","productid","count","parseInt","push","setItem","stringify","updateGoodsInfo","removeFormCar","id","i","splice","updateGoodsSelected","info","selected","getters","getAllCount","c","forEach","getGoodsCount","o","getGoodsSelected","getGoodsCountAndAmount","amount","price","config","productionTip","render","h","$mount","beforeEach","to","from","next","phone","name"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB,C,CAEA;;AACA,OAAOC,MAAP,MAAmB,SAAnB;AACA,OAAM,uBAAN;AACAH,IAAII,GAAJ,CAAQD,MAAR,E,CACA;;AACA,OAAOE,IAAP,MAAiB,MAAjB;AACA,OAAO,oBAAP;AACAL,IAAII,GAAJ,CAAQC,IAAR,E,CACA;;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAO,uBAAP,C,CACA;;AACA,OAAOC,MAAP,MAAmB,QAAnB,C,CACA;;AAEAP,IAAIQ,MAAJ,CAAW,YAAX,EAAyB,UAAUC,OAAV,EAAoD;AAAA,MAAjCC,OAAiC,uEAAvB,qBAAuB;AAC3E,SAAOH,OAAOE,OAAP,EAAgBE,MAAhB,CAAuBD,OAAvB,CAAP;AACD,CAFD,E,CAGA;;AACA,OAAOE,KAAP,MAAkB,SAAlB,C,CACA;;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACAb,IAAII,GAAJ,CAAQS,IAAR;AACA,IAAKC,MAAI,EAAT;AACCA,MAAMC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,KAArB,CAAX,KAAyC,EAA/C;AACD,IAAIC,QAAQ,IAAIN,KAAKO,KAAT,CAAe;AACzBC,SAAO;AACLP,SAAKA,GADA,CAEL;;AAFK,GADkB;AAKzBQ,aAAW;AACTC,YADS,oBACAF,KADA,EACOG,SADP,EACkB;AACzB,UAAIC,OAAO,KAAX;AACAJ,YAAMP,GAAN,CAAUY,IAAV,CAAe,gBAAQ;AACrB,YAAIC,KAAKC,SAAL,IAAkBJ,UAAUI,SAAhC,EAA2C;AACzCD,eAAKE,KAAL,IAAcC,SAASN,UAAUK,KAAnB,CAAd;AACAJ,iBAAO,IAAP;AACA,iBAAO,IAAP;AACD;AACF,OAND;;AAOA,UAAI,CAACA,IAAL,EAAW;AACTJ,cAAMP,GAAN,CAAUiB,IAAV,CAAeP,SAAf;AACD;;AACDP,mBAAae,OAAb,CAAqB,KAArB,EAA4BjB,KAAKkB,SAAL,CAAeZ,MAAMP,GAArB,CAA5B;AACD,KAdQ;AAeToB,mBAfS,2BAeOb,KAfP,EAecG,SAfd,EAeyB;AAChCH,YAAMP,GAAN,CAAUY,IAAV,CAAe,gBAAQ;AACrB,YAAIC,KAAKC,SAAL,IAAkBJ,UAAUI,SAAhC,EAA2C;AACzCD,eAAKE,KAAL,GAAaC,SAASN,UAAUK,KAAnB,CAAb;AACA,iBAAO,IAAP;AACD;AACF,OALD;AAMAZ,mBAAae,OAAb,CAAqB,KAArB,EAA4BjB,KAAKkB,SAAL,CAAeZ,MAAMP,GAArB,CAA5B;AACD,KAvBQ;AAwBTqB,iBAxBS,yBAwBKd,KAxBL,EAwBYe,EAxBZ,EAwBgB;AACvBf,YAAMP,GAAN,CAAUY,IAAV,CAAe,UAACC,IAAD,EAAOU,CAAP,EAAa;AAC1B,YAAIV,KAAKC,SAAL,IAAkBQ,EAAtB,EAA0B;AACxBf,gBAAMP,GAAN,CAAUwB,MAAV,CAAiBD,CAAjB,EAAoB,CAApB;AACA,iBAAO,IAAP;AACD;AACF,OALD;AAMApB,mBAAae,OAAb,CAAqB,KAArB,EAA4BjB,KAAKkB,SAAL,CAAeZ,MAAMP,GAArB,CAA5B;AACD,KAhCQ;AAiCTyB,uBAjCS,+BAiCWlB,KAjCX,EAiCkBmB,IAjClB,EAiCwB;AAC/BnB,YAAMP,GAAN,CAAUY,IAAV,CAAe,gBAAQ;AACrB,YAAIC,KAAKC,SAAL,IAAkBY,KAAKJ,EAA3B,EAA+B;AAC7BT,eAAKc,QAAL,GAAgBD,KAAKC,QAArB;AACD;AACF,OAJD;AAKAxB,mBAAae,OAAb,CAAqB,KAArB,EAA4BjB,KAAKkB,SAAL,CAAeZ,MAAMP,GAArB,CAA5B;AACD;AAxCQ,GALc;AA+CzB4B,WAAS;AACPC,eADO,uBACKtB,KADL,EACY;AACjB,UAAIuB,IAAI,CAAR;AACDvB,YAAMP,GAAN,CAAU+B,OAAV,CAAkB,gBAAQ;AACvBD,aAAKjB,KAAKE,KAAV;AACD,OAFF;AAGC,aAAOe,CAAP;AACD,KAPM;AAQPE,iBARO,yBAQOzB,KARP,EAQc;AACnB,UAAI0B,IAAI,EAAR;AACA1B,YAAMP,GAAN,CAAU+B,OAAV,CAAkB,gBAAQ;AACxBE,UAAEpB,KAAKC,SAAP,IAAoBD,KAAKE,KAAzB;AACD,OAFD;AAGA,aAAOkB,CAAP;AACD,KAdM;AAePC,oBAfO,4BAeU3B,KAfV,EAeiB;AACtB,UAAI0B,IAAI,EAAR;AACA1B,YAAMP,GAAN,CAAU+B,OAAV,CAAkB,gBAAQ;AACxBE,UAAEpB,KAAKC,SAAP,IAAoBD,KAAKc,QAAzB;AACD,OAFD;AAGA,aAAOM,CAAP;AACD,KArBM;AAsBPE,0BAtBO,kCAsBgB5B,KAtBhB,EAsBuB;AAC5B,UAAI0B,IAAI;AACNlB,eAAO,CADD;AAENqB,gBAAQ;AAFF,OAAR;AAIA7B,YAAMP,GAAN,CAAU+B,OAAV,CAAkB,gBAAQ;AACxB,YAAIlB,KAAKc,QAAT,EAAmB;AACjBM,YAAElB,KAAF,IAAWF,KAAKE,KAAhB;AACAkB,YAAEG,MAAF,IAAYvB,KAAKwB,KAAL,GAAaxB,KAAKE,KAA9B;AACD;AACF,OALD;AAMA,aAAOkB,CAAP;AACD;AAlCM;AA/CgB,CAAf,CAAZ;AAwFA/C,IAAIoD,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACA,IAAIrD,GAAJ,CAAQ;AACNE,gBADM;AAENoD,UAAQ;AAAA,WAAKC,EAAEtD,GAAF,CAAL;AAAA,GAFF;AAGNkB;AAHM,CAAR,EAIGqC,MAJH,CAIU,MAJV;AAMAtD,OAAOuD,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC,MAAIC,QAAQ5C,aAAaC,OAAb,CAAqB,OAArB,CAAZ;;AACA,MAAIwC,GAAGI,IAAH,IAAW,UAAX,IAAuBJ,GAAGI,IAAH,IAAW,qBAAtC,EAA6D;AACzD,QAAGD,SAAQ,IAAX,EAAgB;AACd3D,aAAO6B,IAAP,CAAY;AAAE+B,cAAM;AAAR,OAAZ;AACD;AACJ;;AACD,MAAIJ,GAAGI,IAAH,IAAW,IAAf,EAAqB;AACnB,QAAID,SAAS,IAAb,EAAmB;AACjB3D,aAAO6B,IAAP,CAAY;AAAE+B,cAAM;AAAR,OAAZ;AACD;AACF;;AACDF;AACD,CAbD","sourceRoot":"C:\\Users\\web\\Desktop\\WEB1903\\project\\dr_project\\DR\\vue_app_00","sourcesContent":["import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\n// 引入Mint-UI\r\nimport MintUI from 'mint-ui'\r\nimport'mint-ui/lib/style.css'\r\nVue.use(MintUI)\r\n// 引入Vant\r\nimport Vant from 'vant';\r\nimport 'vant/lib/index.css';\r\nVue.use(Vant);\r\n// 导入 MUI 的样式\r\nimport mui from './lib/mui/js/mui.js'\r\nimport './lib/mui/css/mui.css'\r\n// 导入格式化时间的插件\r\nimport moment from 'moment'\r\n// 定义全局的过滤器\r\n\r\nVue.filter('dateFormat', function (dataStr, pattern = \"YYYY-MM-DD HH:mm:ss\") {\r\n  return moment(dataStr).format(pattern)\r\n})  \r\n// 引入axios\r\nimport axios from \"./axios\";\r\n// 引入vuex\r\nimport Vuex from 'vuex'\r\nVue.use(Vuex) \r\nvar  car=[];\r\n car = JSON.parse(localStorage.getItem('car'))||[]\r\nvar store = new Vuex.Store({\r\n  state: { \r\n    car: car \r\n    // { productid:商品的id, count: 要购买的数量, price: 商品的单价，selected: false  }\r\n  },\r\n  mutations: {\r\n    addToCar(state, goodsinfo) {\r\n      var flag = false\r\n      state.car.some(item => {\r\n        if (item.productid == goodsinfo.productid) {\r\n          item.count += parseInt(goodsinfo.count)\r\n          flag = true\r\n          return true\r\n        }\r\n      })\r\n      if (!flag) {\r\n        state.car.push(goodsinfo)\r\n      }\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    },\r\n    updateGoodsInfo(state, goodsinfo) {\r\n      state.car.some(item => {\r\n        if (item.productid == goodsinfo.productid) {\r\n          item.count = parseInt(goodsinfo.count)\r\n          return true\r\n        }\r\n      })\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    },\r\n    removeFormCar(state, id) {\r\n      state.car.some((item, i) => {\r\n        if (item.productid == id) {\r\n          state.car.splice(i, 1)\r\n          return true;\r\n        }\r\n      })\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    },\r\n    updateGoodsSelected(state, info) {\r\n      state.car.some(item => {\r\n        if (item.productid == info.id) {\r\n          item.selected = info.selected\r\n        }\r\n      })\r\n      localStorage.setItem('car', JSON.stringify(state.car))\r\n    }\r\n  },\r\n  getters: { \r\n    getAllCount(state) {\r\n      var c = 0;\r\n     state.car.forEach(item => {\r\n        c += item.count\r\n      })\r\n      return c\r\n    },\r\n    getGoodsCount(state) {\r\n      var o = {}\r\n      state.car.forEach(item => {\r\n        o[item.productid] = item.count\r\n      })\r\n      return o\r\n    },\r\n    getGoodsSelected(state) {\r\n      var o = {}\r\n      state.car.forEach(item => {\r\n        o[item.productid] = item.selected\r\n      })\r\n      return o\r\n    },\r\n    getGoodsCountAndAmount(state) {\r\n      var o = {\r\n        count: 0, \r\n        amount: 0 \r\n      }\r\n      state.car.forEach(item => {\r\n        if (item.selected) {\r\n          o.count += item.count\r\n          o.amount += item.price * item.count\r\n        }\r\n      })\r\n      return o\r\n    }\r\n  }\r\n})\r\n\r\n\r\n\r\n\r\nVue.config.productionTip = false\r\nnew Vue({\r\n  router,\r\n  render: h => h(App),\r\n  store\r\n}).$mount('#app')\r\n\r\nrouter.beforeEach((to, from, next) => {\r\n  let phone = localStorage.getItem('phone')\r\n  if (to.name == 'starinfo'||to.name == 'shopcart-product-id') {\r\n      if(phone ==null){\r\n        router.push({ name: 'my' })\r\n      }\r\n  }\r\n  if (to.name == 'my') { \r\n    if (phone != null) {\r\n      router.push({ name: 'user' });\r\n    }\r\n  }\r\n  next();\r\n})"]}]}